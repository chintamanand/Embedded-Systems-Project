	;ASSIGNMENT 2 QUESTION 3
	;WALP TO SUBTRACT 2, 8 DIGIT BCD NUMBERS IN THE UNPACKED ASCII FORM
	;AVAILABLE IN THE CODE MEMORY, & STORE THE BCD RESULT IN THE ASCII FORM IN RAM

	AREA RESET, DATA, READONLY
	EXPORT __Vectors
__Vectors
	DCD 0x40000000
	DCD Reset_Handler
	ALIGN
	AREA mycode, CODE, READONLY
	ENTRY
	EXPORT Reset_Handler
Reset_Handler
	LDR R0, =SRC1
	LDR R1, =SRC2
	LDR R2, =RES
	ADD R0, #32
	ADD R1, #32
	ADD R2, #8
	LDR R9, =0X20000000
	MSR XPSR, R9
	MOV R5, #08
	
LOOP
	LDRH R3, [R0, #-04]!
	LDRH R4, [R1, #-04]!
	SBC R3, R4        		;NO NEED TO MASK AND EXTRACT THE LSB, THE '3' WILL GET SUBTRACTED
	CMP R3, #0X09
	BLS DOWN1
	MOV R9, #0X00
	SUB R3, #06
	AND R3, #0X0F
	B DOWN2
DOWN1
	LDR R9, =0X20000000
DOWN2
	MSR XPSR, R9
	MOV R8, #0X30
	ADD R8, R3
	
	STRB R8, [R2, #-01]!
	
	SUB R5, #01
	TEQ R5, #00
	BNE LOOP
	
STOP B STOP 

SRC1 DCD 0X0305, 0X0303, 0X0304, 0X0301, 0X0304, 0X0309, 0X0304, 0X0302  ; THERE IS NO DCH, THE NUMBERS WILL GET STORED IN LITTLE ENDIAN AND PADDED  	
SRC2 DCD 0X0301, 0X0309, 0X0309, 0X0301, 0X0303, 0X0308, 0X0309, 0X0309	

	AREA myarea, DATA, READWRITE
RES DCB 0
	END
	
	